services:
  persona_workers:
    environment:
      GENERATION_MODE: stub
      LLM_PROVIDER_CONFIG_PATH: configs/llm/providers/stub.json
      PROMPT_MANIFEST_PATH: prompts/manifest.json
      MEMORY_ENABLED: "true"
      MEMORY_BACKEND: stub
      MEMORY_POLICY_PATH: configs/memory/default_policy.json
      MEMORY_FIXTURES_PATH: data/memory_stub/fixtures/demo.json
      MEMORY_EXTRACT_STRATEGY: heuristic
      MEMORY_MAX_ITEMS: 5
      MEMORY_MAX_CHARS: 800
      AUTO_COMMENTARY_ENABLED: ${AUTO_COMMENTARY_ENABLED:-}
      AUTO_COMMENTARY_CONFIG_PATH: ${AUTO_COMMENTARY_CONFIG_PATH:-/app/configs/auto_commentary/default.json}

  stream_perceptor:
    environment:
      GENERATION_MODE: stub
      LLM_PROVIDER_CONFIG_PATH: configs/llm/providers/stub.json
      PROMPT_MANIFEST_PATH: prompts/manifest.json
      STREAM_FRAMES_KEY: stream:frames
      STREAM_TRANSCRIPTS_KEY: stream:transcripts
      STREAM_OBSERVATIONS_KEY: stream:observations
      LOG_LEVEL: INFO
